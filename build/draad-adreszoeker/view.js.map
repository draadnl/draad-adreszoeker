{"version":3,"file":"draad-adreszoeker/view.js","mappings":"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","sources":["webpack://draad-adreszoeker/./src/draad-adreszoeker/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n`use strict`;\n\n(function () {\n    var $ = $ || jQuery.noConflict();\n\n    class Draad_Adreszoeker {\n\n        constructor( node ) {\n\n            if ( !node ) {\n                throw new Error(\"No valid element passed to Draad_Adreszoeker class.\");\n            }\n\n            this.node = node;\n            this.streetInputNode = this.node.querySelector( '.draad-adreszoeker__filter.--street input' );\n            this.streetSuggestionsNode = this.node.querySelector( '.draad-adreszoeker__filter.--street .draad-adreszoeker__suggestions');\n            this.numberInputNode = this.node.querySelector( '.draad-adreszoeker__filter.--number input' );\n            this.filterFormNode = this.node.querySelector( '.draad-adreszoeker__filters > form' );\n\n            if ( !this.streetInputNode || !this.numberInputNode || !this.filterFormNode ) {\n                throw new Error(\"Draad_Adreszoeker is missing elements in the DOM.\");\n            }\n\n            this.eventBinder();\n\n        }\n\n        eventBinder() {\n            this.streetInputNode.addEventListener( 'input', this.debounce( this.streetHandler, 500 ) );\n            this.filterFormNode.addEventListener( 'submit', this.handleSubmition.bind( this ) );\n        }\n\n        streetHandler = () => {            \n            const streetInputValue = this.streetInputNode.value.trim();\n\n            const notices = this.streetInputNode.parentNode.querySelectorAll( '.draad-adreszoeker__notice' );\n            if ( notices.length >= 1 ) {\n                for ( const notice of notices ) {\n                    notice.remove();\n                }\n            }\n\n            if ( streetInputValue.length < 2 ) {\n                // Clear suggestions\n                this.streetSuggestionsNode.innerHTML = '';\n\n                this.numberInputNode.disabled = true;\n\n                // Add notice\n                const noticeElement = document.createElement('span');\n                noticeElement.className = 'draad-adreszoeker__notice';\n                noticeElement.textContent = 'Straatnaam moet minimaal 2 karakters bevatten.';\n                this.streetInputNode.parentNode.appendChild(noticeElement);\n                // $( this.streetInputNode.parentNode ).append('<span class=\"draad-adreszoeker__notice\">Straatnaam moet minimaal 2 karakters bevatten.</span>');\n            } else {\n                this.numberInputNode.disabled = false;\n            }\n\n            const formData = new FormData(this.filterFormNode);\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                type: 'POST',\n                data: {\n                    action: 'draad_adreszoeker_get_streets',\n                    street: formData.get( 'street' ),\n                },\n                success: function (response) {\n                    console.log( response );\n\n                    this.streetSuggestionsNode.innerHTML = '';\n\n                    // TODO: Add street suggestions\n                },\n                error: function (xhr, status, error) {\n                    console.log('Er gaat iets fout');\n                }\n            });\n\n        }\n\n        async handleSubmition( event ) {\n            event.preventDefault();\n\n            const formData = new FormData(this.filterFormNode);\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                type: 'POST',\n                data: {\n                    action: formData.get( 'action' ),\n                    street: formData.get( 'street' ),\n                    number: formData.get( 'number' ),\n                },\n                success: function (response) {\n                    console.log( response );\n\n                    // TODO: Get Results\n                },\n                error: function (xhr, status, error) {\n                    console.log('Er gaat iets fout');\n                }\n            });\n        }\n\n        debounce( callback, wait ) {\n            let timeout;\n            return (...args) => {\n                clearTimeout(timeout);\n                timeout = setTimeout(function () {\n                    callback.apply(this, args);\n                }, wait);\n            };\n        }\n    }\n\n    document.addEventListener( 'DOMContentLoaded', function () {\n\n        const nodes = document.querySelectorAll( '.draad-adreszoeker' );\n        nodes?.forEach( node => new Draad_Adreszoeker( node ) );\n\n    });\n})();"],"names":["$","jQuery","noConflict","Draad_Adreszoeker","constructor","node","Error","streetInputNode","querySelector","streetSuggestionsNode","numberInputNode","filterFormNode","eventBinder","addEventListener","debounce","streetHandler","handleSubmition","bind","streetInputValue","value","trim","notices","parentNode","querySelectorAll","length","notice","remove","innerHTML","disabled","noticeElement","document","createElement","className","textContent","appendChild","formData","FormData","ajax","url","type","data","action","street","get","success","response","console","log","error","xhr","status","event","preventDefault","number","callback","wait","timeout","args","clearTimeout","setTimeout","apply","nodes","forEach"],"sourceRoot":""}