{"version":3,"file":"draad-adreszoeker/view.js","mappings":"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","sources":["webpack://draad-adreszoeker/./src/draad-adreszoeker/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n`use strict`;\n\n(function () {\n    var $ = $ || jQuery.noConflict();\n\n    class Draad_Adreszoeker {\n\n        constructor( node ) {\n\n            if ( !node ) {\n                throw new Error(\"No valid element passed to Draad_Adreszoeker class.\");\n            }\n\n            this.node = node;\n            this.streetInputNode = this.node.querySelector( '.draad-adreszoeker__filter.--street input' );\n            this.streetSuggestionsNode = this.node.querySelector( '.draad-adreszoeker__filter.--street .draad-adreszoeker__suggestions');\n            this.numberInputNode = this.node.querySelector( '.draad-adreszoeker__filter.--number input' );\n            this.filterFormNode = this.node.querySelector( 'form' );\n            this.outputNode = this.node.querySelector( '.draad-adreszoeker__output' );\n\n            if ( !this.streetInputNode || !this.numberInputNode || !this.filterFormNode || !this.outputNode ) {\n                throw new Error(\"Draad_Adreszoeker is missing elements in the DOM.\");\n            }\n\n            this.eventBinder();\n\n        }\n\n        eventBinder() {\n            this.streetInputNode.addEventListener( 'input', this.debounce( this.streetHandler, 500 ) );\n            this.filterFormNode.addEventListener( 'submit', this.handleSubmition.bind( this ) );\n        }\n\n        streetHandler = () => {            \n            const streetInputValue = this.streetInputNode.value.trim();\n\n            // Remove old notices\n            const notices = this.streetInputNode.parentNode.querySelectorAll( '.draad-adreszoeker__notice' );\n            if ( notices.length >= 1 ) {\n                for ( const notice of notices ) {\n                    notice.remove();\n                }\n            }\n\n            if ( streetInputValue.length < 2 ) {\n                // Clear suggestions\n                this.streetSuggestionsNode.innerHTML = '';\n\n                this.numberInputNode.disabled = true;\n\n                // Add notice\n                const noticeElement = document.createElement('span');\n                noticeElement.className = 'draad-adreszoeker__notice';\n                noticeElement.textContent = 'Straatnaam moet minimaal 2 karakters bevatten.';\n                this.streetInputNode.parentNode.appendChild(noticeElement);\n            } else {\n                this.numberInputNode.disabled = false;\n            }\n\n            const formData = new FormData(this.filterFormNode);\n            $.ajax({\n                url: formData.get( 'admin-ajax' ),\n                type: 'POST',\n                data: {\n                    action: 'draad_adreszoeker_get_streets',\n                    street: formData.get( 'street' ),\n                },\n                success: function (options) {\n                    console.log( options );\n\n                    // Clear suggestions\n                    this.streetSuggestionsNode.innerHTML = '';\n\n                    if ( !options || options.length < 1 ) {\n                        // If there are no results add an empty option making that clear.\n                        const optionNode = new HTMLElement( 'option' );\n                        optionNode.value = '';\n                        optionNode.textContent = 'Geen resultaten gevonden';\n                        this.streetSuggestionsNode.appendChild(optionNode);\n                        return;\n                    }\n\n                    options?.forEach( option => {\n                        // Add an option for each street.\n                        const optionNode = new HTMLElement( 'option' );\n                        optionNode.value = option.street;\n                        optionNode.textContent = option.street;\n                        this.streetSuggestionsNode.appendChild(optionNode);\n                    } );\n                },\n                error: function (xhr, status, error) {\n                    throw new Error( error );\n                }\n            });\n\n        }\n\n        async handleSubmition( event ) {\n            event.preventDefault();\n\n            const formData = new FormData(this.filterFormNode);\n            $.ajax({\n                url: formData.get( 'admin-ajax' ),\n                type: 'POST',\n                data: {\n                    action: formData.get( 'action' ),\n                    street: formData.get( 'street' ),\n                    number: formData.get( 'number' ),\n                },\n                success: function (html) {\n                    console.log( html );\n\n                    this.outputNode.innerHTML = html;\n\n                    this.addNotice( 'Het advies is geopend.' );\n\n                    const closeButtonNode = this.outputNode.querySelector( '.draad-adreszoeker__close-advice' );\n                    closeButtonNode?.addEventListener( 'click', event => {\n                        this.outputNode.innerHTML = '';\n                        this.streetInputNode.value = '';\n                        this.numberInputNode.value = '';\n                        this.addNotice( 'Het advies is gesloten' );\n                    } );\n\n                    // initializeTabs();\n                    // initializeToggles();\n                    // scrollToResult();\n                },\n                error: function (xhr, status, error) {\n                    throw new Error( error );\n                }\n            });\n        }\n\n        debounce( callback, wait ) {\n            let timeout;\n            return (...args) => {\n                clearTimeout(timeout);\n                timeout = setTimeout(function () {\n                    callback.apply(this, args);\n                }, wait);\n            };\n        }\n\n        addNotice( message ) {\n            // Remove old notices\n            const notices = this.node.querySelectorAll( ':scope > .draad-adreszoeker__notice' );\n            if ( notices.length >= 1 ) {\n                for ( const notice of notices ) {\n                    notice.remove();\n                }\n            }\n\n            // Make new announcement that there is a new advice showing.\n            const noticeElement = document.createElement('span');\n            noticeElement.classList.add('draad-adreszoeker__notice');\n            noticeElement.classList.add('sr-only');\n            noticeElement.setAttribute('aria-live', 'polite');\n            noticeElement.textContent = message;\n            this.node.appendChild(noticeElement);\n        }\n    }\n\n    document.addEventListener( 'DOMContentLoaded', function () {\n\n        const nodes = document.querySelectorAll( '.draad-adreszoeker' );\n        nodes?.forEach( node => new Draad_Adreszoeker( node ) );\n\n    });\n})();"],"names":["$","jQuery","noConflict","Draad_Adreszoeker","constructor","node","Error","streetInputNode","querySelector","streetSuggestionsNode","numberInputNode","filterFormNode","outputNode","eventBinder","addEventListener","debounce","streetHandler","handleSubmition","bind","streetInputValue","value","trim","notices","parentNode","querySelectorAll","length","notice","remove","innerHTML","disabled","noticeElement","document","createElement","className","textContent","appendChild","formData","FormData","ajax","url","get","type","data","action","street","success","options","console","log","optionNode","HTMLElement","forEach","option","error","xhr","status","event","preventDefault","number","html","addNotice","closeButtonNode","callback","wait","timeout","args","clearTimeout","setTimeout","apply","message","classList","add","setAttribute","nodes"],"sourceRoot":""}